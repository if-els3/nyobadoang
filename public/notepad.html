<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notepad - CollabPad</title>
    <meta name="description" content="Collaborative notepad with real-time editing">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body class="light-theme notepad-page">

    <!-- Auth Modal -->
    <div id="authModal" class="modal active">
        <div class="modal-content auth-modal">
            <div class="auth-header">
                <svg width="50" height="50" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="40" height="40" rx="10" fill="url(#gradient)" />
                    <path d="M12 14H28M12 20H28M12 26H22" stroke="white" stroke-width="2.5" stroke-linecap="round" />
                    <defs>
                        <linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40">
                            <stop offset="0%" stop-color="#6366f1" />
                            <stop offset="100%" stop-color="#8b5cf6" />
                        </linearGradient>
                    </defs>
                </svg>
                <h2>Access Notepad</h2>
                <p>Enter your credentials to continue</p>
            </div>

            <form id="authForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="user1, user2, demo1, or demo2" required
                        autocomplete="username">
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required
                        autocomplete="current-password">
                </div>

                <button type="submit" class="btn btn-primary">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                            clip-rule="evenodd" />
                    </svg>
                    Unlock Notepad
                </button>
            </form>

            <div id="authError" class="error-message"></div>
        </div>
    </div>

    <!-- Main Notepad Interface -->
    <div id="notepadContainer" class="notepad-container" style="display: none;">
        <header class="notepad-header">
            <div class="header-left">
                <a href="/" class="logo-link">
                    <svg width="32" height="32" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="40" height="40" rx="10" fill="url(#gradient2)" />
                        <path d="M12 14H28M12 20H28M12 26H22" stroke="white" stroke-width="2.5"
                            stroke-linecap="round" />
                        <defs>
                            <linearGradient id="gradient2" x1="0" y1="0" x2="40" y2="40">
                                <stop offset="0%" stop-color="#6366f1" />
                                <stop offset="100%" stop-color="#8b5cf6" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <span class="logo-text">CollabPad</span>
                </a>

                <div class="status-indicators">
                    <div class="active-users" id="activeUsers">
                        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                            <path
                                d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                        </svg>
                        <span id="userCount">1</span>
                    </div>

                    <div class="last-edited" id="lastEdited">
                        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                                clip-rule="evenodd" />
                        </svg>
                        <span id="timestamp">Never edited</span>
                    </div>
                </div>
            </div>

            <div class="header-right">
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" />
                    </svg>
                    <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                    </svg>
                </button>
            </div>
        </header>

        <div class="toolbar">
            <div class="toolbar-group">
                <button class="toolbar-btn" id="uploadTxtBtn" title="Upload .txt file">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z" />
                    </svg>
                    Upload .txt
                </button>

                <button class="toolbar-btn" id="uploadFileBtn" title="Upload image or file">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"
                            clip-rule="evenodd" />
                    </svg>
                    Upload File
                </button>

                <input type="file" id="txtFileInput" accept=".txt" style="display: none;">
                <input type="file" id="fileInput" style="display: none;">
            </div>

            <div class="toolbar-group">
                <button class="toolbar-btn" id="exportRawBtn" title="Export as raw text">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z"
                            clip-rule="evenodd" />
                    </svg>
                    Raw
                </button>

                <button class="toolbar-btn" id="exportMdBtn" title="Export as markdown">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                            clip-rule="evenodd" />
                    </svg>
                    Markdown
                </button>

                <button class="toolbar-btn" id="exportCodeBtn" title="Export as code">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z"
                            clip-rule="evenodd" />
                    </svg>
                    Code
                </button>
            </div>
        </div>

        <div class="editor-container">
            <div class="line-numbers" id="lineNumbers"></div>
            <div class="editor" id="editor" contenteditable="true" spellcheck="true" data-placeholder="Start typing...">
            </div>
            <div class="feedback-layer" id="feedbackLayer"></div>
        </div>

        <footer class="notepad-footer">
            <div class="stats">
                <span class="stat-item">
                    <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                        <path
                            d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                    </svg>
                    <span id="wordCount">0</span> words
                </span>
                <span class="stat-item">
                    <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                            clip-rule="evenodd" />
                    </svg>
                    <span id="charCount">0</span> characters
                </span>
                <span class="stat-item">
                    <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                            clip-rule="evenodd" />
                    </svg>
                    <span id="lineCount">1</span> lines
                </span>
            </div>

            <div class="uploaded-files" id="uploadedFiles"></div>
        </footer>
    </div>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="modal">
        <div class="modal-content feedback-modal">
            <h3>Add Feedback to Line <span id="feedbackLineNum"></span></h3>

            <div class="reaction-picker">
                <button class="reaction-btn" data-reaction="üëç">üëç</button>
                <button class="reaction-btn" data-reaction="‚ù§Ô∏è">‚ù§Ô∏è</button>
                <button class="reaction-btn" data-reaction="üòä">üòä</button>
                <button class="reaction-btn" data-reaction="üéâ">üéâ</button>
                <button class="reaction-btn" data-reaction="ü§î">ü§î</button>
                <button class="reaction-btn" data-reaction="üëÄ">üëÄ</button>
                <button class="reaction-btn" data-reaction="üí°">üí°</button>
                <button class="reaction-btn" data-reaction="‚úÖ">‚úÖ</button>
            </div>

            <div class="form-group">
                <label for="feedbackComment">Comment (optional)</label>
                <textarea id="feedbackComment" placeholder="Add a comment..." rows="3"></textarea>
            </div>

            <div class="modal-actions">
                <button class="btn btn-secondary" id="closeFeedbackBtn">Cancel</button>
                <button class="btn btn-primary" id="submitFeedbackBtn">Add Feedback</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/notepad.js"></script>
</body>

</html>